# ğŸŒ¦ï¸ Infinion Weather API â€“ Cloud-Native Deployment

## ğŸš€ Project Overview
This project demonstrates a full **CI/CD deployment pipeline** for the **Infinion Weather API** on **Microsoft Azure**.  
It automates infrastructure provisioning, container image builds, and Kubernetes deployment using:

- **Terraform** â€“ Infrastructure-as-Code (IaC)  
- **Azure Container Registry (ACR)** â€“ Private image storage  
- **Azure Kubernetes Service (AKS)** â€“ Managed Kubernetes  
- **GitHub Actions** â€“ CI/CD automation  
- **Azure CLI / kubectl** â€“ Validation & operations  

---

## ğŸ—ï¸ High-Level Architecture

```
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚        GitHub Repo          â”‚
                â”‚  (source + GitHub Actions)  â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Build & Push to â”‚
                  â”‚ Azure Container  â”‚
                  â”‚    Registry      â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚ Azure Kubernetes Service  â”‚
               â”‚ (AKS pulls image via MI)  â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ LoadBalancer Service       â”‚
              â”‚ Exposes API publicly       â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

âš™ï¸ Components
```
| Component        | Tool                     | Purpose                          |
| ---------------- | ------------------------ | -------------------------------- |
| **IaC**          | Terraform                | Provisions RG, ACR, AKS          |
| **Registry**     | Azure Container Registry | Secure image storage             |
| **Orchestrator** | AKS                      | Runs Weather API containers      |
| **CI/CD**        | GitHub Actions           | Builds and deploys automatically |
| **Networking**   | LoadBalancer             | Exposes API endpoint             |
```

erraform Infrastructure
Files

main.tf â€“ defines RG, ACR, AKS, RBAC

variables.tf â€“ all environment variables

providers.tf â€“ configures Azure provider

outputs.tf â€“ exports ACR login server, AKS name, etc.

Key Commands

```
terraform init
terraform plan
terraform apply -auto-approve
```

erraform provisions:

Resource Group â†’ infinion-devops-rg

ACR â†’ e.g. infinionacr1760906713

AKS â†’ infinion-aks-cluster

Role assignment â†’ allows AKS to pull from ACR securely


Deploy
```
kubectl apply -f k8s/
kubectl get all -n infinion
```


Output
```
NAME                                        READY   STATUS    RESTARTS   AGE
pod/infinion-weather-api-5975554d56-5dljg   1/1     Running   0          5m
service/infinion-weather-api-service        LoadBalancer   10.0.117.60   145.133.106.43   80:30463/TCP   5m
```

Test Endpoint
```
curl -s http://145.133.106.43/weatherforecast | jq .
```

âœ… Returns JSON weather data



ğŸ” Security Best Practices

âœ”ï¸ Managed Identity for AKS â†’ no static secrets
âœ”ï¸ ACR admin disabled
âœ”ï¸ Private image pull integration
âœ”ï¸ Role-based access (Contributor)
âœ”ï¸ Namespace isolation (infinion)
âœ”ï¸ GitHub Secrets for CI/CD credentials


Cleanup

When done, destroy all resources:

```
terraform destroy -auto-approve
# OR if created manually
az group delete -n infinion-devops-rg --yes --no-wait
```